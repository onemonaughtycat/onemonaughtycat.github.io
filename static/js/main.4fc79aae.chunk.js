(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(9),i=n.n(o),c=(n(14),n(2)),s=n(3),u=n(6),l=n(5),h=n(4),d=(n(15),n(0)),p=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).state={selected:-1},r.handleClick=r.handleClick.bind(Object(u.a)(r)),r}return Object(s.a)(n,[{key:"handleClick",value:function(e){for(var t=0;t<e.target.parentNode.children.length;t++)e.target===e.target.parentNode.children[t]&&this.setState({selected:t});this.props.onItemClick(e.target.outerText)}},{key:"render",value:function(){var e=this,t=this.props.ids.map((function(t,n){var r="system-menu-item";return n===e.state.selected&&(r+=" selected"),Object(d.jsx)("li",{className:r,onClick:e.handleClick,children:t},n)}));return Object(d.jsx)("div",{className:"system-menu-wrapper",children:Object(d.jsx)("ul",{className:"system-menu-container",children:t})})}}]),n}(a.a.Component),f=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return Object(d.jsx)("h1",{children:"Hello, world!"})}}]),n}(a.a.Component),b=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return Object(d.jsx)("blockquote",{children:"The quick brown fox jump over a lazy dog."})}}]),n}(a.a.Component),v={bomb:"\ud83d\udca3",mark:"\u2755",helper:"\u2754",exploded:"\ud83d\udca5"},O=(n(17),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleContextMenu=function(e){e.preventDefault()},e.handleMouseDown=function(t){e._buttons=t.buttons},e.handleMouseUp=function(t){if(e._buttons){switch(e._buttons){case 1:e.props.onLeftClick(e.props);break;case 2:e.props.onRightClick(e.props);break;case 3:e.props.onBothClick(e.props)}e._buttons=null}},e}return Object(s.a)(n,[{key:"render",value:function(){var e=["square"],t="";return this.props.isOpened?(e.push("opened"),this.props.withBomb&&(t=v.bomb),this.props.nearBombsCount&&(t=this.props.nearBombsCount,e.push("number"))):(this.props.isMarked&&(t=v.mark),this.props.isHelper&&(t=v.helper)),Object(d.jsx)("div",{className:e.join(" "),onContextMenu:this.handleContextMenu,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,children:t})}}]),n}(a.a.Component)),j=(n(18),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleLeftClick=function(t){e.props.onLeftClick(t)},e.handleRightClick=function(t){e.props.onRightClick(t)},e.handleBothClick=function(t){e.props.onBothClick(t)},e}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return Object(d.jsx)("div",{className:"board",children:this.props.data.map((function(t,n){return Object(d.jsx)("div",{children:t.map((function(t,n){return Object(d.jsx)(O,{x:t.x,y:t.y,withBomb:t.withBomb,nearBombsCount:t.nearBombsCount,isOpened:t.isOpened,isMarked:t.isMarked,isHelper:t.isHelper,onLeftClick:e.handleLeftClick,onRightClick:e.handleRightClick,onBothClick:e.handleBothClick},n)}))},n)}))})}}]),n}(a.a.Component)),m=n(8),k={IsLose:1,IsWin:2},C=function(){function e(){Object(c.a)(this,e)}return Object(s.a)(e,null,[{key:"initBoard",value:function(t,n,r){for(var a=[],o=function(e,t){return a.filter((function(n){return n.x===e&&n.y===t})).length},i=0;i<r;i++){var c=Math.floor(Math.random()*t),s=Math.floor(Math.random()*n);o(c,s)?i--:a.push({x:c,y:s})}for(var u=[],l=0;l<n;l++)for(var h=0;h<t;h++)if(!o(h,l)){for(var d=0,p=-1;p<=1;p++)for(var f=-1;f<=1;f++)o(h-f,l-p)&&d++;d&&u.push({x:h,y:l,count:d})}var b=Array(n).fill().map((function(e,n){return Array(t).fill().map((function(e,t){var r=u.filter((function(e){return e.x===t&&e.y===n}));return{x:t,y:n,withBomb:Boolean(o(t,n)),nearBombsCount:r.length?r[0].count:0,isOpened:!1,isMarked:!1}}))}));return console.log(e.logBoard(b)),b}},{key:"openSquare",value:function(t,n){var r=t.map((function(e){return e.map((function(e){return e}))})),a=r[n.y][n.x];y(r,a);var o=e.getStatus(r,a);return o===k.IsLose&&r.forEach((function(e){return e.forEach((function(e){return e.isOpened=!0}))})),{board:r,status:o}}},{key:"setMark",value:function(t,n){if(n.isOpened)return t;var r=t.map((function(e){return e.map((function(e){return e}))})),a=r[n.y][n.x];return a.isMarked=!n.isMarked,{board:r,status:e.getStatus(r,a)}}},{key:"tryOpenNearSquares",value:function(t,n){var r=!1;if(x(t,n,(function(e){r||e.isOpened||e.isMarked||e.withBomb&&(r=!0)})),r)return{board:t,status:e.getStatus(t,n)};var a=t.map((function(e){return e.map((function(e){return e}))}));return x(a,n,(function(e){e.isOpened||e.isMarked||(e.isOpened=!0)})),{board:a,status:e.getStatus(a,n)}}},{key:"getStatus",value:function(e,t){var n,r=!0,a=Object(m.a)(e);try{for(a.s();!(n=a.n()).done;){var o,i=n.value,c=Object(m.a)(i);try{for(c.s();!(o=c.n()).done;){var s=o.value;s.withBomb&&!s.isMarked&&(r=!1)}}catch(u){c.e(u)}finally{c.f()}if(!r)break}}catch(u){a.e(u)}finally{a.f()}return t.isOpened&&t.withBomb?k.IsLose:r?k.IsWin:0}},{key:"logBoard",value:function(e){console.log(e.map((function(e){return e.map((function(e){return e.withBomb?"Q":e.nearBombsCount?e.nearBombsCount+"":" "}))})))}}]),e}();function y(e,t){t.isOpened||t.isMarked||(t.isOpened=!0,t.withBomb||t.nearBombsCount||x(e,t,(function(t){return y(e,t)})))}function x(e,t,n){for(var r=t.x,a=t.y,o=-1;o<=1;o++)for(var i=-1;i<=1;i++)if(e[a+o]&&e[a+o][r+i]){var c=e[a+o][r+i];c&&(c.x===r&&c.y===a||n(c))}}n(19);var g=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={board:C.initBoard(+e.props.width,+e.props.height,+e.props.bombsCount)},e.handleLeftClick=function(t){var n=C.openSquare(e.state.board,t),r=n.board,a=n.status;e.setState({board:r},(function(){return e.callbackGameOver(a)}))},e.handleRightClick=function(t){var n=C.setMark(e.state.board,t),r=n.board,a=n.status;e.setState({board:r},(function(){return e.callbackGameOver(a)}))},e.handleBothClick=function(t){var n=C.tryOpenNearSquares(e.state.board,t),r=n.board,a=n.status;e.setState({board:r},(function(){return e.callbackGameOver(a)}))},e}return Object(s.a)(n,[{key:"callbackGameOver",value:function(e){e&&this.props.onGameOver(e===k.IsWin)}},{key:"render",value:function(){return Object(d.jsx)("div",{className:"container",children:Object(d.jsx)(j,{data:this.state.board,onLeftClick:this.handleLeftClick,onRightClick:this.handleRightClick,onBothClick:this.handleBothClick})})}}]),n}(a.a.Component),B={Hello:f,Fox:b,Minesweeper:function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleGameOver=function(e){alert(e?"\u0422\u044b \u043f\u043e\u0431\u0435\u0434\u0438\u043b":"\u0418\u0433\u0440\u0430 \u043e\u043a\u043e\u043d\u0447\u0435\u043d\u0430")},e}return Object(s.a)(n,[{key:"render",value:function(){return Object(d.jsx)(g,{width:"9",height:"9",bombsCount:"10",onGameOver:this.handleGameOver})}}]),n}(a.a.Component)},M=Object.keys(B),w=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=B[this.props.id];return e?Object(d.jsx)(e,{}):null}}]),n}(a.a.Component),S=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).state={id:""},r.handleMenuItemClick=r.handleMenuItemClick.bind(Object(u.a)(r)),r}return Object(s.a)(n,[{key:"handleMenuItemClick",value:function(e){this.state.id!==e&&this.setState({id:e})}},{key:"render",value:function(){var e=this.state.id;return Object(d.jsxs)("div",{children:[Object(d.jsx)(p,{ids:M,onItemClick:this.handleMenuItemClick}),Object(d.jsx)(w,{id:e})]})}}]),n}(a.a.Component);i.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(S,{})}),document.getElementById("root"))}],[[20,1,2]]]);
//# sourceMappingURL=main.4fc79aae.chunk.js.map